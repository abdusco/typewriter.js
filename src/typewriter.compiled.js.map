{"version":3,"file":"typewriter.compiled.js","sources":["D:/Development/web/playground/typewriter/src/typewriter.js"],"sourcesContent":["/**\r\n * Created by Abdus on 2.10.2016.\r\n */\r\n((global) => {\r\n    \"use strict\";\r\n    function typewriter(typeables, options) {\r\n\r\n        function extend(from, to) {\r\n            Object.keys(from).forEach((k) => {\r\n                if (!k in to) return;\r\n                to[k] = from[k];\r\n            });\r\n            return to;\r\n        }\r\n\r\n        function typeLetters(el, word, delay) {\r\n            return new Promise((resolve, reject) => {\r\n                var curr = 0;\r\n                var max = word.length - 1;\r\n\r\n                waitComplete(delay, function () {\r\n                    var rafid = requestAnimationFrame(() => {\r\n                        cancelAnimationFrame(rafid);\r\n\r\n                        if (curr <= max) {\r\n                            el.innerHTML += word[curr++];\r\n                        } else {\r\n                            resolve(el);\r\n                        }\r\n                    })\r\n                });\r\n            })\r\n        }\r\n\r\n        function deleteLetters(el, delay) {\r\n            return new Promise((resolve, reject) => {\r\n                var content = el.innerHTML;\r\n                // start from the last letter\r\n                var last = content.length - 1;\r\n\r\n                waitComplete(delay, function () {\r\n                    var rafId = requestAnimationFrame(() => {\r\n                        if (last >= 0) {\r\n                            el.innerHTML = content.substring(0, last--);\r\n                            cancelAnimationFrame(rafId);\r\n                        }\r\n                        else resolve(el);\r\n                    });\r\n                });\r\n            })\r\n        }\r\n\r\n        function waitComplete(delay, cb) {\r\n            setTimeout(() => {\r\n                cb();\r\n                waitComplete(delay, cb);\r\n            }, delay);\r\n        }\r\n\r\n\r\n        function advanceWord(typee) {\r\n            var id = setTimeout(() => {\r\n                    // get next word\r\n                    typee.current = (typee.current + 1) % typee.words.length;\r\n                    var next = typee.words[typee.current];\r\n                    if (next == undefined) {\r\n                        debugger;\r\n                    }\r\n                    // animate\r\n                    deleteLetters(typee, options.delay)\r\n                        .then((el) => typeLetters(typee, next, options.delay))\r\n                        .then(() => {\r\n                            clearTimeout(id);\r\n                            // wait before typing the next word\r\n                            setTimeout(advanceWord(typee), options.waitBefore);\r\n                        });\r\n\r\n                },\r\n                // wait before deleting the word\r\n                options.waitAfter);\r\n        }\r\n\r\n        function typeWords(typee) {\r\n            typee.words = typee.dataset[options.data].split(options.delimiter);\r\n            if (!typee.words.length) return;\r\n\r\n            typee.current = -1;\r\n            // wait before initializing sequence\r\n            setTimeout(() => {\r\n                advanceWord(typee);\r\n            }, options.waitFirst)\r\n        }\r\n\r\n\r\n        function init() {\r\n            // ensure we have element array\r\n            if (!typeables.toString() !== \"[object NodeList]\") {\r\n                if (typeof typeables === 'string') {\r\n                    typeables = document.querySelectorAll(typeables);\r\n                }\r\n                // check if single element is passed\r\n                else if (typeables.toString() === \"[object HTMLBodyElement]\") {\r\n                    typeables = [typeables];\r\n                }\r\n                else {\r\n                    throw new Error('Please provide a valid selector or element');\r\n                }\r\n            }\r\n\r\n            var DEFAULTS = {\r\n                data: 'typewriter', // data attribute to source the words\r\n                delimiter: ',', // separator between the words\r\n                waitFirst: 3000, // delay before starting effect\r\n                waitBefore: 100, // delay before typing the next word\r\n                waitAfter: 1000, // delay after typing the word\r\n                delay: 100 // delay between keystrokes\r\n            };\r\n            options = extend(options || {}, DEFAULTS);\r\n\r\n            [].slice.call(typeables).forEach((typee) => typeWords(typee, options.waitAfter));\r\n        }\r\n\r\n        init();\r\n    }\r\n\r\n    // AMD support\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(() => typewriter);\r\n    }\r\n    // CommonJS and Node.js module support.\r\n    else if (typeof exports !== 'undefined') {\r\n        // Support Node.js specific `module.exports` (which can be a function)\r\n        if (typeof module !== 'undefined' && module.exports) {\r\n            exports = module.exports = typewriter;\r\n        }\r\n        // But always support CommonJS module 1.1.1 spec (`exports` cannot be a function)\r\n        exports.typewriter = typewriter;\r\n    } else {\r\n        global.typewriter = typewriter;\r\n    }\r\n})(this);"],"names":[],"mappings":"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"}